<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Lost Persons Registry</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Vazirmatn', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* RTL Support for Persian */
        [dir="rtl"] {
            text-align: right;
            font-family: 'Vazirmatn', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        [dir="rtl"] .back-button {
            left: auto;
            right: 20px;
        }

        [dir="rtl"] .back-button:hover {
            transform: translateX(5px);
        }

        [dir="rtl"] .nav-arrow.left {
            left: auto;
            right: 20px;
        }

        [dir="rtl"] .nav-arrow.right {
            right: auto;
            left: 20px;
        }

        [dir="rtl"] .search-icon {
            right: auto;
            left: 20px;
        }

        [dir="rtl"] .clear-search {
            right: auto;
            left: 50px;
        }

        [dir="rtl"] .search-bar {
            padding: 16px 20px 16px 50px;
        }

        /* =========================================== */
        /* FIXED: Mobile Buttons - Always Vertical */
        /* This overrides RTL row-reverse on mobile */
        /* =========================================== */
        
        @media (max-width: 768px) {
            /* Force buttons to be vertical on ALL mobile views */
            .button-container {
                flex-direction: column !important;
                align-items: center !important;
                gap: 15px !important;
                width: 100% !important;
            }
            
            /* Explicitly override any RTL styling */
            [dir="rtl"] .button-container {
                flex-direction: column !important;
                align-items: center !important;
            }
            
            /* Make buttons full width on mobile */
            .btn {
                width: 100% !important;
                max-width: 300px !important;
                margin: 0 auto !important;
            }
        }

        body {
            color: #333;
            overflow-x: hidden;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* Language Toggle Button */
        .language-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 500;
            background-color: rgba(255, 255, 255, 0.9);
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 8px 15px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        [dir="rtl"] .language-toggle {
            right: auto;
            left: 20px;
        }

        .language-toggle:hover {
            background-color: #f0f0f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        }

        .language-toggle:active {
            transform: translateY(0);
        }

        .language-flag {
            font-size: 1.2rem;
        }

        /* Page container and common styles */
        .page {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            animation: pageFadeIn 0.8s ease-out forwards;
        }

        @keyframes pageFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .page.active {
            display: block;
        }

        /* =========================================== */
        /* BACKGROUND IMAGES - ADD YOUR IMAGES HERE */
        /* =========================================== */
        
        /* Front Page - Desktop (Photo 1) */
        #front-page {
            /* REPLACE THIS URL WITH YOUR Photo 1 */
            background-image: url('assets/lionsword.JPEG');
        }

        /* Second Page - Same as front page */
        #second-page {
            /* REPLACE THIS URL WITH YOUR Photo 1 */
            background-image: url('assets/lionsword.JPEG');
        }

        /* Gallery Page - Desktop (Photo 4) */
        #gallery-page {
            /* REPLACE THIS URL WITH YOUR Photo 4 */
            background-image: url('assets/photo4.jpg');
        }

        /* Mobile Backgrounds */
        @media (max-width: 768px) {
            /* Front Page - Mobile (Photo 2) */
            #front-page {
                /* REPLACE THIS URL WITH YOUR Photo 2 */
                background-image: url('assets/lionsword_m.JPEG') !important;
            }
            
            /* Gallery Page - Mobile (Photo 5) */
            #gallery-page {
                /* REPLACE THIS URL WITH YOUR Photo 5 */
                background-image: url('assets/photo5.jpg') !important;
            }
        }

        .content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.363);
            border-radius: 10px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0);
            min-height: calc(100vh - 40px);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            animation: contentFadeIn 1s ease-out 0.3s forwards;
        }

        @keyframes contentFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Front page styles */
        #front-page .content {
            background-color: rgba(255, 255, 255, 0.147); 
        }

        .headline {
            font-size: 3.5rem;
            color: #000000;
            text-align: center;
            margin-bottom: 20px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: textFadeIn 1s ease-out 0.5s forwards; 
        }

        .description {
            font-size: 1.5rem;
            color: #000000;
            text-align: center;
            max-width: 800px;
            margin-bottom: 60px;
            line-height: 1.6;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.058);
            opacity: 0;
            animation: textFadeIn 1s ease-out 0.7s forwards; 
        }

        @keyframes textFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Button container */
        .button-container {
            display: flex;
            gap: 30px;
            width: 100%;
            justify-content: center;
            opacity: 0;
            animation: buttonsFadeIn 1s ease-out 0.9s forwards;
        }

        @keyframes buttonsFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Button styles */
        .btn {
            padding: 16px 40px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            min-width: 180px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            opacity: 0;
            animation: buttonFadeIn 0.8s ease-out forwards;
        }

        .btn-primary {
            background-color: #5e0808;
            color: white;
            animation-delay: 1s;
        }

        .btn-secondary {
            background-color: #bd3232;
            color: #ffffff;
            border: 2px solid #dddddd00;
            animation-delay: 1.2s;
        }

        @keyframes buttonFadeIn {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }

        .btn:active {
            transform: translateY(0);
        }

        /* Search bar styles */
        .search-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto 40px;
            position: relative;
            opacity: 0;
            animation: searchFadeIn 0.8s ease-out 0.6s forwards;
        }

        @keyframes searchFadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .search-bar {
            width: 100%;
            padding: 16px 50px 16px 20px;
            font-size: 1.1rem;
            border: 2px solid #ddd;
            border-radius: 50px;
            background-color: rgba(255, 255, 255, 0.9);
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .search-bar:focus {
            outline: none;
            border-color: #000000;
            box-shadow: 0 4px 15px rgba(26, 90, 122, 0.2);
        }

        .search-icon {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            color: #77777700;
            font-size: 1.2rem;
        }

        .clear-search {
            position: absolute;
            right: 50px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #777;
            font-size: 1.2rem;
            cursor: pointer;
            display: none;
            transition: color 0.2s;
        }

        .clear-search:hover {
            color: #1a5a7a;
        }

        .search-info {
            text-align: center;
            margin-top: 10px;
            color: #666;
            font-size: 0.9rem;
            opacity: 0;
            animation: fadeIn 0.5s ease-out 1s forwards;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2rem;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            width: 100%;
            display: none;
        }

        /* Lost persons gallery */
        .gallery-container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .gallery-title {
            font-size: 2.5rem;
            color: #000000;
            text-align: center;
            margin-bottom: 30px;
            width: 100%;
            opacity: 0;
            animation: textFadeIn 0.8s ease-out 0.4s forwards;
        }

        /* Desktop gallery (6 columns) - CHANGED from 3 to 6 */
        .desktop-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }
        
        /* Add this new class for desktop 6-person layout */
        .desktop-gallery.six-per-page {
            grid-template-columns: repeat(3, 1fr);
        }
        
        @media (min-width: 1024px) {
            .desktop-gallery.six-per-page {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .person-card {
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(214, 8, 8, 0.1);
            transition: transform 0.3s ease;
            opacity: 0;
            animation: cardFadeIn 0.8s ease-out forwards;
        }

        .person-card:nth-child(1) { animation-delay: 0.5s; }
        .person-card:nth-child(2) { animation-delay: 0.6s; }
        .person-card:nth-child(3) { animation-delay: 0.7s; }
        .person-card:nth-child(4) { animation-delay: 0.8s; }
        .person-card:nth-child(5) { animation-delay: 0.9s; }
        .person-card:nth-child(6) { animation-delay: 1.0s; }

        @keyframes cardFadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .person-card:hover {
            transform: translateY(-5px);
        }

        .person-photo {
            width: 100%;
            height: 300px;
            object-fit: cover;
            border-bottom: 2px solid #eee;
        }

        .person-info {
            padding: 20px;
            text-align: center;
        }

        .person-name {
            font-size: 1.5rem;
            color: #000000;
            margin-bottom: 8px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .person-name:hover {
            color: #5e0808;
            text-decoration: underline;
        }
        
        .person-name a {
            color: inherit;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .person-name a:hover {
            text-decoration: underline;
        }

        .person-date {
            font-size: 1rem;
            color: #ca1e1e;
        }

        /* Priority star indicator */
        .priority-star {
            color: #ca1e1e;
            font-weight: bold;
            margin-left: 5px;
        }
        
        [dir="rtl"] .priority-star {
            margin-left: 0;
            margin-right: 5px;
        }

        /* Mobile gallery - NOW SHOWS 8 PEOPLE PER PAGE */
        .mobile-gallery {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        .mobile-person-card {
            background-color: rgba(255, 255, 255, 0.85);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            opacity: 0;
            animation: cardFadeIn 0.8s ease-out forwards;
        }

        .mobile-person-card:nth-child(1) { animation-delay: 0.4s; }
        .mobile-person-card:nth-child(2) { animation-delay: 0.5s; }
        .mobile-person-card:nth-child(3) { animation-delay: 0.6s; }
        .mobile-person-card:nth-child(4) { animation-delay: 0.7s; }
        .mobile-person-card:nth-child(5) { animation-delay: 0.8s; }
        .mobile-person-card:nth-child(6) { animation-delay: 0.9s; }
        .mobile-person-card:nth-child(7) { animation-delay: 1.0s; }
        .mobile-person-card:nth-child(8) { animation-delay: 1.1s; }

        .mobile-person-photo {
            width: 100%;
            height: 250px;
            object-fit: cover;
        }

        .mobile-person-info {
            padding: 15px;
            text-align: center;
        }

        .mobile-person-name {
            font-size: 1.4rem;
            color: #000000;
            margin-bottom: 5px;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .mobile-person-name:hover {
            color: #5e0808;
            text-decoration: underline;
        }
        
        .mobile-person-name a {
            color: inherit;
            text-decoration: none;
            display: block;
            width: 100%;
            height: 100%;
        }
        
        .mobile-person-name a:hover {
            text-decoration: underline;
        }

        .mobile-person-date {
            font-size: 1rem;
            color: #b32121;
        }

        /* Navigation arrows - TRANSPARENT and ALWAYS VISIBLE */
        .nav-arrow {
            position: fixed;
            top: 50%;
            transform: translateY(-50%);
            width: 70px;
            height: 70px;
            color: rgba(255, 255, 255, 0.9);
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 4rem;
            cursor: pointer;
            border-radius: 50%;
            transition: all 0.3s ease;
            z-index: 100;
            opacity: 1 !important;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
            background-color: transparent !important;
            animation: arrowFadeIn 0.8s ease-out 1s forwards;
        }

        @keyframes arrowFadeIn {
            from {
                opacity: 0;
                transform: translateY(-50%) scale(0.8);
            }
            to {
                opacity: 1;
                transform: translateY(-50%) scale(1);
            }
        }

        .nav-arrow:hover {
            color: rgba(255, 255, 255, 1);
            text-shadow: 0 4px 15px rgba(0, 0, 0, 0.7);
            transform: translateY(-50%) scale(1.1);
        }

        .nav-arrow.left {
            left: 20px;
        }

        .nav-arrow.right {
            right: 20px;
        }

        /* =========================================== */
        /* PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile */
        /* =========================================== */
        .pagination-container {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
            flex-wrap: wrap;
            width: 100%;
        }
        
        .page-number {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.8);
            color: #333;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .page-number:hover {
            background-color: #ae2f2f;
            color: white;
            transform: scale(1.1);
        }
        
        .page-number.active {
            background-color: #ae2f2f;
            color: white;
            border: 2px solid white;
            box-shadow: 0 0 10px rgba(174, 47, 47, 0.5);
        }
        
        /* Mobile specific pagination adjustments */
        @media (max-width: 768px) {
            .pagination-container {
                gap: 10px;
                margin-top: 20px;
            }
            
            .page-number {
                width: 36px;
                height: 36px;
                font-size: 0.95rem;
            }
        }
        
        @media (max-width: 480px) {
            .page-number {
                width: 32px;
                height: 32px;
                font-size: 0.85rem;
            }
        }

        /* Back button */
        .back-button {
            position: absolute;
            top: 20px;
            left: 20px;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.85);
            border: 1px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            opacity: 0;
            animation: buttonFadeIn 0.8s ease-out 0.4s forwards;
        }

        .back-button:hover {
            background-color: #f0f0f0;
            transform: translateX(-5px);
        }

        /* =========================================== */
        /* FIXED: Mobile Header - Buttons No Longer Cover Title */
        /* =========================================== */
        
        @media (max-width: 768px) {
            .page .content {
                padding-top: 80px !important;
                position: relative;
                min-height: calc(100vh - 40px);
            }
            
            .page .headline,
            .page .gallery-title {
                margin-top: 10px;
                margin-bottom: 25px;
                font-size: 1.8rem;
                line-height: 1.3;
                word-break: break-word;
                padding-left: 10px;
                padding-right: 10px;
                width: 100%;
            }
            
            .back-button {
                top: 15px;
                left: 15px;
                padding: 8px 16px;
                font-size: 0.9rem;
                z-index: 600;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }
            
            .language-toggle {
                top: 15px;
                right: 15px;
                padding: 8px 16px;
                font-size: 0.9rem;
                z-index: 600;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            }
            
            [dir="rtl"] .back-button {
                left: auto;
                right: 15px;
            }
            
            [dir="rtl"] .language-toggle {
                right: auto;
                left: 15px;
            }
            
            .page .description {
                margin-top: 10px;
                margin-bottom: 30px;
                font-size: 1rem;
                padding-left: 15px;
                padding-right: 15px;
            }
            
            #gallery-page .content {
                padding-top: 80px !important;
            }
            
            #gallery-page .gallery-title {
                margin-top: 5px;
                margin-bottom: 20px;
            }
            
            #gallery-page .search-container {
                margin-top: 10px;
            }
        }

        @media (max-width: 480px) {
            .page .content {
                padding-top: 90px !important;
            }
            
            .page .headline,
            .page .gallery-title {
                font-size: 1.5rem;
                padding-left: 5px;
                padding-right: 5px;
            }
            
            .back-button {
                top: 12px;
                left: 12px;
                padding: 6px 14px;
                font-size: 0.85rem;
            }
            
            .language-toggle {
                top: 12px;
                right: 12px;
                padding: 6px 14px;
                font-size: 0.85rem;
            }
            
            [dir="rtl"] .back-button {
                left: auto;
                right: 12px;
            }
            
            [dir="rtl"] .language-toggle {
                right: auto;
                left: 12px;
            }
        }

        /* Keep existing responsive styles but ensure button vertical stacking */
        @media (max-width: 1024px) {
            .headline {
                font-size: 2.8rem;
            }
            
            .description {
                font-size: 1.1rem;
                margin-bottom: 40px;
            }
            
            .btn {
                padding: 14px 30px;
                min-width: 160px;
            }
            
            .nav-arrow {
                width: 60px;
                height: 60px;
                font-size: 3.5rem;
            }
            
            .search-bar {
                padding: 14px 50px 14px 20px;
                font-size: 1rem;
            }
        }

        @media (max-width: 768px) {
            .page {
                padding: 10px;
            }
            
            .content {
                padding: 15px;
                background-color: rgba(255, 255, 255, 0.8);
            }
            
            .headline {
                font-size: 2.2rem;
            }
            
            .description {
                font-size: 1rem;
                margin-bottom: 30px;
            }
            
            /* BUTTON FIX IS HERE - This overrides RTL */
            .button-container {
                flex-direction: column !important;
                align-items: center !important;
                gap: 15px !important;
                width: 100% !important;
            }
            
            [dir="rtl"] .button-container {
                flex-direction: column !important;
                align-items: center !important;
            }
            
            .btn {
                width: 100% !important;
                max-width: 300px !important;
                margin: 0 auto !important;
            }
            
            .gallery-title {
                font-size: 2rem;
            }
            
            .desktop-gallery {
                display: none;
            }
            
            .mobile-gallery {
                display: flex !important;
            }
            
            .nav-arrow {
                display: none;
            }
            
            .search-container {
                margin-bottom: 30px;
            }
            
            .search-bar {
                padding: 12px 45px 12px 15px;
            }
            
            .search-icon {
                right: 15px;
            }
            
            .clear-search {
                right: 40px;
            }
        }

        @media (max-width: 480px) {
            .headline {
                font-size: 1.8rem;
            }
            
            .content {
                padding: 10px;
            }
            
            .person-photo, .mobile-person-photo {
                height: 200px;
            }
            
            .person-name, .mobile-person-name {
                font-size: 1.2rem;
            }
            
            .search-bar {
                font-size: 0.95rem;
            }
        }
    </style>
    
    <!-- Add Vazirmatn font for Persian support -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vazirmatn@33.003/font.css">
</head>
<body dir="ltr">
    <!-- Language Toggle Button -->
    <div class="language-toggle" id="language-toggle">
        <span class="language-flag">üá¨üáß</span>
        <span class="language-text">English</span>
    </div>

    <!-- Front Page -->
    <div id="front-page" class="page active">
        <div class="content">
            <h1 class="headline" data-en="List Of People In Custody and In Danger of Death penalty In Iran" data-fa="ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ ÿ®ÿßÿ≤ÿØÿßÿ¥ÿ™ ÿ¥ÿØŸá Ÿà ÿØÿ± ÿÆÿ∑ÿ± ÿßÿπÿØÿßŸÖ">List Of People In Custody and In Danger of Death penalty In Iran</h1>
            <p class="description" data-en="These lists are gathered from reliable sources, Mostly from families across social media platforms such as X, Telegram and Instagram." 
               data-fa="ÿ™Ÿá€åŸá ÿß€åŸÜ ŸÑ€åÿ≥ÿ™ Ÿáÿß ÿßÿ≤ ÿ∑ÿ±€åŸÇ ŸÖŸÜÿßÿ®ÿπ ŸÖŸàÿ´ŸÇ Ÿà ŸÇÿßÿ®ŸÑ ÿßÿ∑ŸÖ€åŸÜÿßŸÜ ÿµŸàÿ±ÿ™ ⁄Øÿ±ŸÅÿ™Ÿá ÿßÿ≥ÿ™ ⁄©Ÿá ÿß⁄©ÿ´ÿ± ŸÜÿßŸÖ Ÿáÿß ÿ™Ÿàÿ≥ÿ∑ ÿÆÿßŸÜŸàÿßÿØŸá Ÿáÿß ÿØÿ± ŸæŸÑÿ™ŸÅÿ±ŸÖ Ÿáÿß€å ÿß€å⁄©ÿ≥ÿå ÿ™ŸÑ⁄Øÿ±ÿßŸÖ Ÿà ÿß€åŸÜÿ≥ÿ™ÿß⁄Øÿ±ÿßŸÖ ÿßŸÜÿ™ÿ¥ÿßÿ± €åÿßŸÅÿ™Ÿá ÿßŸÜÿØ.">
                These lists are gathered from reliable sources, Mostly from families across social media platforms such as X, Telegram and Instagram.
            </p>
            <div class="button-container">
                <button class="btn btn-primary" id="btn-page2" data-en="List Of People" data-fa="ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ">List Of People</button>
                <button class="btn btn-secondary" id="btn-other" data-en="Report an Endangered Person" data-fa="⁄Øÿ≤ÿßÿ±ÿ¥ ÿßŸÅÿ±ÿßÿØ ÿØÿ± ŸÖÿπÿ±ÿ∂ ÿÆÿ∑ÿ±">Report an Endangered Person</button>
            </div>
        </div>
    </div>

    <!-- Second Page -->
    <div id="second-page" class="page">
        <div class="content">
            <button class="back-button" id="back-to-front" data-en="‚Üê Back" data-fa="‚Üê ÿ®ÿßÿ≤⁄Øÿ¥ÿ™">‚Üê Back</button>
            <h1 class="headline" data-en="List Of People" data-fa="ŸÑ€åÿ≥ÿ™ ÿßŸÅÿ±ÿßÿØ">List Of People</h1>
            <p class="description" data-en="" data-fa="">
                
            </p>
            <div class="button-container">
                <button class="btn btn-primary" id="btn-lost-persons" data-en="In Danger Of Death Penalty" data-fa="ÿØÿ± ÿÆÿ∑ÿ± ÿßÿπÿØÿßŸÖ">In Danger Of Death Penalty</button>
                <button class="btn btn-secondary" id="btn-category2" data-en="Missing" data-fa="ŸÖŸÅŸÇŸàÿØ ÿ¥ÿØŸá">Missing</button>
                <button class="btn btn-secondary" id="btn-category3" data-en="In Custody" data-fa="ÿ®ÿßÿ≤ÿØÿßÿ¥ÿ™€å">In Custody</button>
            </div>
        </div>
    </div>

    <!-- Lost Persons Gallery Page -->
    <div id="gallery-page" class="page page-container">
        <div class="nav-arrow left" id="prev-page">‚Äπ</div>
        <div class="nav-arrow right" id="next-page">‚Ä∫</div>
        
        <div class="content">
            <button class="back-button" id="back-to-second" data-en="‚Üê Back" data-fa="‚Üê ÿ®ÿßÿ≤⁄Øÿ¥ÿ™">‚Üê Back</button>
            <h1 class="gallery-title" data-en="People In Danger Of Death Penalty" data-fa="ÿßŸÅÿ±ÿßÿØ ÿØÿ± ÿÆÿ∑ÿ± ÿßÿπÿØÿßŸÖ">People In Danger Of Death Penalty</h1>
            
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" class="search-bar" id="search-bar" placeholder="Search by name..." 
                       data-en-placeholder="Search by name..." 
                       data-fa-placeholder="ÿ¨ÿ≥ÿ™ÿ¨Ÿà ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜÿßŸÖ...">
                <button class="clear-search" id="clear-search">‚úï</button>
                <div class="search-icon">üîç</div>
                <div class="search-info" data-en="Search through missing persons by name." 
                     data-fa="ÿØÿ± ŸÖ€åÿßŸÜ ÿßŸÅÿ±ÿßÿØ ŸÖŸÅŸÇŸàÿØ ÿ¥ÿØŸá ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜÿßŸÖ ÿ¨ÿ≥ÿ™ÿ¨Ÿà ⁄©ŸÜ€åÿØ.">
                    Search through missing persons by name.
                </div>
            </div>
            
            <!-- No results message -->
            <div class="no-results" id="no-results" data-en="No matching persons found. If you know any person in danger of death penalty, please report us." 
                 data-fa="ŸÅÿ±ÿØ€å ÿ®ÿß ÿß€åŸÜ ŸÖÿ¥ÿÆÿµÿßÿ™ €åÿßŸÅÿ™ ŸÜÿ¥ÿØ. ÿß⁄Øÿ± ÿ¥ÿÆÿµ ÿØÿ± ŸÖÿπÿ±ÿ∂ ÿÆÿ∑ÿ±€å ÿ±ÿß ŸÖ€åÿ¥ŸÜÿßÿ≥€åÿØ ⁄©Ÿá ŸÜÿßŸÖÿ¥ ÿØÿ± ŸÑ€åÿ≥ÿ™ ŸÜ€åÿ≥ÿ™ÿå ÿ¢ŸÜ ÿ±ÿß ÿ®Ÿá ŸÖÿß ⁄Øÿ≤ÿßÿ±ÿ¥ ÿØŸá€åÿØ.">
                <p>No matching persons found. If you know any person in danger of death penalty, please report us.</p>
            </div>
            
            <!-- Desktop layout (6 per page) -->
            <div class="desktop-gallery six-per-page" id="desktop-gallery">
                <!-- Content will be populated by JavaScript -->
            </div>
            
            <!-- Mobile layout (8 per page) -->
            <div class="mobile-gallery" id="mobile-gallery">
                <!-- Content will be populated by JavaScript -->
            </div>
            
            <!-- PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile -->
            <div class="pagination-container" id="pagination-container">
                <!-- Content will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // FIXED: Language Switching Works Immediately
        // ============================================
        
        // Multi-language data structure
        var appData = {
            currentLanguage: 'en',
            languages: {
                en: {
                    name: "English",
                    flag: "üá¨üáß",
                    dir: "ltr"
                },
                fa: {
                    name: "ŸÅÿßÿ±ÿ≥€å",
                    flag: "üáÆüá∑", 
                    dir: "rtl"
                }
            },
            
            lostPersons: {
                // English names
                names_en: [
                    "1. * John Mayer",
                    "2. Sarah Johnson", 
                    "3. Michael Chen",
                    "4. * Emma Rodriguez",
                    "5. David Wilson",
                    "6. Olivia Smith",
                    "7. * James Brown",
                    "8. Sophia Williams",
                    "9. Daniel Taylor",
                    "10. Isabella Martinez",
                    "11. Christopher Davis",
                    "12. Amelia Anderson",
                    "13. Robert Miller",
                    "14. Jennifer Garcia",
                    "15. William Jones",
                    "16. Elizabeth Davis",
                    "17. Richard Martinez",
                    "18. Patricia Hernandez",
                    "19. Joseph Lopez",
                    "20. Margaret Gonzalez",
                    "21. Thomas Wilson",
                    "22. Sandra Anderson",
                    "23. Charles Thomas",
                    "24. Lisa Taylor"
                ],
                
                // Persian names
                names_fa: [
                    "1. * ÿ¨ÿßŸÜ ŸÖÿß€åÿ±",
                    "2. ÿ≥ÿßÿ±ÿß ÿ¨ÿßŸÜÿ≥ŸàŸÜ",
                    "3. ŸÖÿß€å⁄©ŸÑ ⁄ÜŸÜ", 
                    "4. * ÿßŸÖÿß ÿ±ŸàÿØÿ±€å⁄Øÿ≤",
                    "5. ÿØ€åŸà€åÿØ Ÿà€åŸÑÿ≥ŸàŸÜ",
                    "6. ÿßŸàŸÑ€åŸà€åÿß ÿßÿ≥ŸÖ€åÿ™",
                    "7. * ÿ¨€åŸÖÿ≤ ÿ®ÿ±ÿßŸàŸÜ",
                    "8. ÿ≥ŸàŸÅ€åÿß Ÿà€åŸÑ€åÿßŸÖÿ≤",
                    "9. ÿØŸÜ€åŸÑ ÿ™€åŸÑŸàÿ±",
                    "10. ÿß€åÿ≤ÿßÿ®ŸÑÿß ŸÖÿßÿ±ÿ™€åŸÜÿ≤",
                    "11. ⁄©ÿ±€åÿ≥ÿ™ŸàŸÅÿ± ÿØ€åŸà€åÿ≥",
                    "12. ÿ¢ŸÖŸÑ€åÿß ÿßŸÜÿØÿ±ÿ≥ŸàŸÜ",
                    "13. ÿ±ÿßÿ®ÿ±ÿ™ ŸÖ€åŸÑÿ±",
                    "14. ÿ¨ŸÜ€åŸÅÿ± ⁄Øÿßÿ±ÿ≥€åÿß",
                    "15. Ÿà€åŸÑ€åÿßŸÖ ÿ¨ŸàŸÜÿ≤",
                    "16. ÿßŸÑ€åÿ≤ÿßÿ®ÿ™ ÿØ€åŸà€åÿ≥",
                    "17. ÿ±€å⁄Üÿßÿ±ÿØ ŸÖÿßÿ±ÿ™€åŸÜÿ≤",
                    "18. Ÿæÿßÿ™ÿ±€åÿ¥€åÿß Ÿáÿ±ŸÜÿßŸÜÿØÿ≤",
                    "19. ÿ¨Ÿàÿ≤ŸÅ ŸÑŸàŸæÿ≤",
                    "20. ŸÖÿßÿ±⁄Øÿßÿ±ÿ™ ⁄ØŸàŸÜÿ≤ÿßŸÑÿ≥",
                    "21. ÿ™ŸàŸÖÿßÿ≥ Ÿà€åŸÑÿ≥ŸàŸÜ",
                    "22. ÿ≥ÿßŸÜÿØÿ±ÿß ÿßŸÜÿØÿ±ÿ≥ŸàŸÜ",
                    "23. ⁄Üÿßÿ±ŸÑÿ≤ ÿ™ŸàŸÖÿßÿ≥",
                    "24. ŸÑ€åÿ≤ÿß ÿ™€åŸÑŸàÿ±"
                ],
                
                // English dates
                dates_en: [
                    "1. Jan 15, 2023",
                    "2. Feb 3, 2023",
                    "3. Mar 22, 2023",
                    "4. Apr 10, 2023",
                    "5. May 5, 2023",
                    "6. Jun 18, 2023",
                    "7. Jul 7, 2023",
                    "8. Aug 29, 2023",
                    "9. Sep 14, 2023",
                    "10. Oct 1, 2023",
                    "11. Nov 21, 2023",
                    "12. Dec 9, 2023",
                    "13. Jan 7, 2024",
                    "14. Feb 14, 2024",
                    "15. Mar 3, 2024",
                    "16. Apr 22, 2024",
                    "17. May 17, 2024",
                    "18. Jun 8, 2024",
                    "19. Jul 19, 2024",
                    "20. Aug 11, 2024",
                    "21. Sep 5, 2024",
                    "22. Oct 23, 2024",
                    "23. Nov 15, 2024",
                    "24. Dec 2, 2024"
                ],
                
                // Persian dates
                dates_fa: [
                    "1. ÿØ€å 25ÿå 1401",
                    "2. ÿ®ŸáŸÖŸÜ 14ÿå 1401",
                    "3. ŸÅÿ±Ÿàÿ±ÿØ€åŸÜ 2ÿå 1402",
                    "4. ŸÅÿ±Ÿàÿ±ÿØ€åŸÜ 21ÿå 1402",
                    "5. ÿßÿ±ÿØ€åÿ®Ÿáÿ¥ÿ™ 15ÿå 1402",
                    "6. ÿÆÿ±ÿØÿßÿØ 28ÿå 1402",
                    "7. ÿ™€åÿ± 16ÿå 1402",
                    "8. ÿ¥Ÿáÿ±€åŸàÿ± 7ÿå 1402",
                    "9. ÿ¥Ÿáÿ±€åŸàÿ± 23ÿå 1402",
                    "10. ŸÖŸáÿ± 9ÿå 1402",
                    "11. ÿ¢ÿ∞ÿ± 1ÿå 1402",
                    "12. ÿ¢ÿ∞ÿ± 18ÿå 1402",
                    "13. ÿØ€å 17ÿå 1402",
                    "14. ÿ®ŸáŸÖŸÜ 25ÿå 1402",
                    "15. ÿßÿ≥ŸÅŸÜÿØ 13ÿå 1402",
                    "16. ŸÅÿ±Ÿàÿ±ÿØ€åŸÜ 3ÿå 1403",
                    "17. ÿßÿ±ÿØ€åÿ®Ÿáÿ¥ÿ™ 28ÿå 1403",
                    "18. ÿÆÿ±ÿØÿßÿØ 19ÿå 1403",
                    "19. ÿ™€åÿ± 29ÿå 1403",
                    "20. ŸÖÿ±ÿØÿßÿØ 21ÿå 1403",
                    "21. ÿ¥Ÿáÿ±€åŸàÿ± 15ÿå 1403",
                    "22. ŸÖŸáÿ± 2ÿå 1403",
                    "23. ÿ¢ÿ®ÿßŸÜ 25ÿå 1403",
                    "24. ÿ¢ÿ∞ÿ± 12ÿå 1403"
                ],
                
                // English links
                links_en: [
                    "1. https://twitter.com/example1",
                    "2. https://twitter.com/example2",
                    "3. https://twitter.com/example3",
                    "4. https://twitter.com/example4",
                    "5. https://twitter.com/example5",
                    "6. https://twitter.com/example6",
                    "7. https://twitter.com/example7",
                    "8. https://twitter.com/example8",
                    "9. https://twitter.com/example9",
                    "10. https://twitter.com/example10",
                    "11. https://twitter.com/example11",
                    "12. https://twitter.com/example12",
                    "13. https://twitter.com/example13",
                    "14. https://twitter.com/example14",
                    "15. https://twitter.com/example15",
                    "16. https://twitter.com/example16",
                    "17. https://twitter.com/example17",
                    "18. https://twitter.com/example18",
                    "19. https://twitter.com/example19",
                    "20. https://twitter.com/example20",
                    "21. https://twitter.com/example21",
                    "22. https://twitter.com/example22",
                    "23. https://twitter.com/example23",
                    "24. https://twitter.com/example24"
                ],
                
                // Persian links
                links_fa: [
                    "1. https://twitter.com/example1",
                    "2. https://twitter.com/example2",
                    "3. https://twitter.com/example3",
                    "4. https://twitter.com/example4",
                    "5. https://twitter.com/example5",
                    "6. https://twitter.com/example6",
                    "7. https://twitter.com/example7",
                    "8. https://twitter.com/example8",
                    "9. https://twitter.com/example9",
                    "10. https://twitter.com/example10",
                    "11. https://twitter.com/example11",
                    "12. https://twitter.com/example12",
                    "13. https://twitter.com/example13",
                    "14. https://twitter.com/example14",
                    "15. https://twitter.com/example15",
                    "16. https://twitter.com/example16",
                    "17. https://twitter.com/example17",
                    "18. https://twitter.com/example18",
                    "19. https://twitter.com/example19",
                    "20. https://twitter.com/example20",
                    "21. https://twitter.com/example21",
                    "22. https://twitter.com/example22",
                    "23. https://twitter.com/example23",
                    "24. https://twitter.com/example24"
                ],
                
                // Local image files
                photos: [
                    "images/1.jpeg",
                    "images/2.jpeg", 
                    "images/3.jpeg",
                    "images/4.jpeg",
                    "images/5.jpeg",
                    "images/6.jpeg",
                    "images/7.jpeg",
                    "images/8.jpeg",
                    "images/9.jpeg",
                    "images/10.jpeg",
                    "images/11.jpeg",
                    "images/12.jpeg",
                    "images/13.jpeg",
                    "images/14.jpeg",
                    "images/15.jpeg",
                    "images/16.jpeg",
                    "images/17.jpeg",
                    "images/18.jpeg",
                    "images/19.jpeg",
                    "images/20.jpeg",
                    "images/21.jpeg",
                    "images/22.jpeg",
                    "images/23.jpeg",
                    "images/24.jpeg"
                ]
            }
        };

        // Global variables
        var currentPage = 1;
        var isSearching = false;
        // Desktop shows 6 people per page, Mobile shows 8 people per page
        var itemsPerPageDesktop = 6;
        var itemsPerPageMobile = 8;
        
        // Cache
        var cachedItems = null;
        var cachedLanguage = null;
        var cachedSearchTerm = null;

        // Helper function to check if mobile
        function isMobile() {
            return window.innerWidth <= 768;
        }

        // Handle missing images
        function handleMissingImage(imgElement, index) {
            imgElement.onerror = function() {
                console.warn("Image not found, using placeholder");
                this.src = "https://via.placeholder.com/300x400/1a5a7a/ffffff?text=Person+" + (index + 1);
                this.alt = "Placeholder";
            };
        }

        // Language switching - IMMEDIATE update
        function switchLanguage(lang) {
            appData.currentLanguage = lang;
            var langData = appData.languages[lang];
            
            // Update HTML direction
            document.body.dir = langData.dir;
            document.documentElement.lang = lang;
            
            // Update language toggle button
            var toggleBtn = document.getElementById('language-toggle');
            var flagSpan = toggleBtn.querySelector('.language-flag');
            var textSpan = toggleBtn.querySelector('.language-text');
            
            flagSpan.textContent = langData.flag;
            textSpan.textContent = lang === 'en' ? 'ŸÅÿßÿ±ÿ≥€å' : 'English';
            
            // Update all text elements
            updateTextElements();
            
            // Update search bar placeholder
            var searchBar = document.getElementById('search-bar');
            if (searchBar) {
                searchBar.placeholder = lang === 'en' 
                    ? searchBar.getAttribute('data-en-placeholder') 
                    : searchBar.getAttribute('data-fa-placeholder');
            }
            
            // Force clear cache and reset to page 1
            cachedItems = null;
            cachedLanguage = null;
            cachedSearchTerm = null;
            currentPage = 1;
            
            // Force immediate re-render
            renderGallery();
            
            // Save preference
            localStorage.setItem('preferredLanguage', lang);
        }

        // Update text elements
        function updateTextElements() {
            var elements = document.querySelectorAll('[data-en], [data-fa]');
            
            for (var i = 0; i < elements.length; i++) {
                var element = elements[i];
                if (appData.currentLanguage === 'en') {
                    if (element.hasAttribute('data-en')) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.placeholder = element.getAttribute('data-en');
                        } else {
                            element.textContent = element.getAttribute('data-en');
                        }
                    }
                } else {
                    if (element.hasAttribute('data-fa')) {
                        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                            element.placeholder = element.getAttribute('data-fa');
                        } else {
                            element.textContent = element.getAttribute('data-fa');
                        }
                    }
                }
            }
        }

        // Parse name
        function parseName(nameString) {
            var hasPriority = nameString.indexOf('*') !== -1;
            var cleanName = nameString.replace('*', '').replace(/\s+/g, ' ').trim();
            return {
                displayName: cleanName,
                hasPriority: hasPriority
            };
        }

        // Parse link
        function parseLink(linkString) {
            if (!linkString) return '#';
            var match = linkString.match(/\d+\.\s*(.+)/);
            return match ? match[1] : linkString;
        }

        // Get current data with priority sorting
        function getCurrentData() {
            var lang = appData.currentLanguage;
            
            var nameArray = appData.lostPersons["names_" + lang] || appData.lostPersons.names_en;
            var dateArray = appData.lostPersons["dates_" + lang] || appData.lostPersons.dates_en;
            var linkArray = appData.lostPersons["links_" + lang] || appData.lostPersons.links_en;
            var photosArray = appData.lostPersons.photos;
            
            var combined = [];
            
            for (var i = 0; i < nameArray.length; i++) {
                var parsed = parseName(nameArray[i]);
                var date = dateArray[i] || (i + 1 + ". Date Unknown");
                var link = linkArray[i] || (i + 1 + ". #");
                var photo = photosArray[i] || "images/placeholder.jpg";
                
                combined.push({
                    displayName: parsed.displayName,
                    hasPriority: parsed.hasPriority,
                    date: date,
                    link: link,
                    photo: photo,
                    index: i
                });
            }
            
            // Sort: priority first
            combined.sort(function(a, b) {
                if (a.hasPriority && !b.hasPriority) return -1;
                if (!a.hasPriority && b.hasPriority) return 1;
                return 0;
            });
            
            return {
                items: combined
            };
        }

        // Get filtered items
        function getFilteredItems(searchTerm) {
            var currentLang = appData.currentLanguage;
            
            if (cachedLanguage !== currentLang || cachedSearchTerm !== searchTerm || cachedItems === null) {
                var currentData = getCurrentData();
                var allItems = currentData.items;
                
                if (!searchTerm || searchTerm.trim() === '') {
                    cachedItems = allItems;
                    isSearching = false;
                } else {
                    var term = searchTerm.toLowerCase().trim();
                    var filtered = [];
                    
                    for (var i = 0; i < allItems.length; i++) {
                        if (allItems[i].displayName.toLowerCase().indexOf(term) !== -1) {
                            filtered.push(allItems[i]);
                        }
                    }
                    
                    cachedItems = filtered;
                    isSearching = true;
                }
                
                cachedLanguage = currentLang;
                cachedSearchTerm = searchTerm;
            }
            
            return cachedItems;
        }

        // Render gallery
        function renderGallery() {
            var searchTerm = document.getElementById('search-bar') ? document.getElementById('search-bar').value : '';
            var items = getFilteredItems(searchTerm);
            
            var desktopGallery = document.getElementById('desktop-gallery');
            var mobileGallery = document.getElementById('mobile-gallery');
            var paginationContainer = document.getElementById('pagination-container');
            var noResultsMsg = document.getElementById('no-results');
            
            if (!desktopGallery || !mobileGallery || !paginationContainer) return;
            
            // Clear existing content
            desktopGallery.innerHTML = '';
            mobileGallery.innerHTML = '';
            paginationContainer.innerHTML = '';
            
            // Show/hide no results
            if (items.length === 0) {
                if (noResultsMsg) noResultsMsg.style.display = 'block';
                desktopGallery.style.display = 'none';
                mobileGallery.style.display = 'none';
                paginationContainer.style.display = 'none';
                return;
            } else {
                if (noResultsMsg) noResultsMsg.style.display = 'none';
                
                // Set display based on screen size
                var mobile = isMobile();
                desktopGallery.style.display = mobile ? 'none' : 'grid';
                mobileGallery.style.display = mobile ? 'flex' : 'none';
                paginationContainer.style.display = 'flex'; // Always show pagination
            }
            
            var totalItems = items.length;
            
            // Use different items per page for desktop vs mobile
            var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
            var totalPages = Math.ceil(totalItems / itemsPerPage);
            
            if (currentPage < 1) currentPage = 1;
            if (currentPage > totalPages) currentPage = totalPages;
            
            var dateLabel = appData.currentLanguage === 'en' ? 'Missing since:' : 'ŸÖŸÅŸÇŸàÿØ ÿ¥ÿØŸá ÿßÿ≤:';
            
            // Desktop or Mobile gallery - paginated based on device
            var startIndex = (currentPage - 1) * itemsPerPage;
            var endIndex = Math.min(startIndex + itemsPerPage, totalItems);
            
            for (var i = startIndex; i < endIndex; i++) {
                var item = items[i];
                if (!item) continue;
                
                var link = parseLink(item.link);
                var displayName = item.displayName || 'Unknown';
                var priorityStar = item.hasPriority ? '<span class="priority-star">*</span>' : '';
                
                if (isMobile()) {
                    // Mobile card
                    var mobileCard = document.createElement('div');
                    mobileCard.className = 'mobile-person-card';
                    mobileCard.style.animationDelay = (0.4 + ((i - startIndex) % 8) * 0.1) + 's';
                    mobileCard.innerHTML = '<img src="' + (item.photo || 'images/placeholder.jpg') + '" alt="' + displayName + '" class="mobile-person-photo"><div class="mobile-person-info"><div class="mobile-person-name"><a href="' + link + '" target="_blank" rel="noopener noreferrer">' + displayName + priorityStar + '</a></div><div class="mobile-person-date">' + dateLabel + ' ' + (item.date || 'Unknown') + '</div></div>';
                    mobileGallery.appendChild(mobileCard);
                    
                    var mobileImg = mobileCard.querySelector('.mobile-person-photo');
                    if (mobileImg) handleMissingImage(mobileImg, item.index || 0);
                } else {
                    // Desktop card
                    var personCard = document.createElement('div');
                    personCard.className = 'person-card';
                    personCard.style.animationDelay = (0.5 + ((i - startIndex) % 6) * 0.1) + 's';
                    personCard.innerHTML = '<img src="' + (item.photo || 'images/placeholder.jpg') + '" alt="' + displayName + '" class="person-photo"><div class="person-info"><div class="person-name"><a href="' + link + '" target="_blank" rel="noopener noreferrer">' + displayName + priorityStar + '</a></div><div class="person-date">' + dateLabel + ' ' + (item.date || 'Unknown') + '</div></div>';
                    desktopGallery.appendChild(personCard);
                    
                    var img = personCard.querySelector('.person-photo');
                    if (img) handleMissingImage(img, item.index || 0);
                }
            }
            
            // ============================================
            // PAGINATION - NUMERAL NAVIGATOR for BOTH Desktop AND Mobile
            // ============================================
            for (var p = 1; p <= totalPages; p++) {
                var pageNumber = document.createElement('div');
                pageNumber.className = 'page-number' + (p === currentPage ? ' active' : '');
                pageNumber.dataset.page = p;
                pageNumber.textContent = p;
                
                pageNumber.addEventListener('click', function() {
                    currentPage = parseInt(this.dataset.page);
                    renderGallery();
                });
                
                paginationContainer.appendChild(pageNumber);
            }
            
            // Trigger animations
            setTimeout(function() {
                var cards = document.querySelectorAll('.person-card, .mobile-person-card');
                for (var c = 0; c < cards.length; c++) {
                    cards[c].style.animation = 'none';
                    cards[c].offsetHeight;
                    cards[c].style.animation = 'cardFadeIn 0.8s ease-out ' + cards[c].style.animationDelay + ' forwards';
                }
            }, 50);
        }

        // Page navigation
        document.addEventListener('DOMContentLoaded', function() {
            var frontPage = document.getElementById('front-page');
            var secondPage = document.getElementById('second-page');
            var galleryPage = document.getElementById('gallery-page');
            
            var btnPage2 = document.getElementById('btn-page2');
            var btnOther = document.getElementById('btn-other');
            var btnLostPersons = document.getElementById('btn-lost-persons');
            var btnCategory2 = document.getElementById('btn-category2');
            var btnCategory3 = document.getElementById('btn-category3');
            var backToFront = document.getElementById('back-to-front');
            var backToSecond = document.getElementById('back-to-second');
            
            var prevPage = document.getElementById('prev-page');
            var nextPage = document.getElementById('next-page');
            
            var searchBar = document.getElementById('search-bar');
            var clearSearchBtn = document.getElementById('clear-search');
            var languageToggle = document.getElementById('language-toggle');
            
            // Load saved language
            var savedLanguage = localStorage.getItem('preferredLanguage');
            if (savedLanguage && (savedLanguage === 'en' || savedLanguage === 'fa')) {
                setTimeout(function() {
                    switchLanguage(savedLanguage);
                }, 10);
            }
            
            // Language toggle
            languageToggle.addEventListener('click', function() {
                var newLang = appData.currentLanguage === 'en' ? 'fa' : 'en';
                switchLanguage(newLang);
            });
            
            // Show page function
            function showPage(page) {
                var allPages = document.querySelectorAll('.page');
                for (var i = 0; i < allPages.length; i++) {
                    allPages[i].classList.remove('active');
                }
                
                page.style.animation = 'none';
                page.offsetHeight;
                page.style.animation = 'pageFadeIn 0.8s ease-out forwards';
                page.classList.add('active');
                
                if (page.id === 'gallery-page') {
                    if (searchBar) {
                        searchBar.value = '';
                        clearSearchBtn.style.display = 'none';
                    }
                    currentPage = 1;
                    cachedItems = null;
                    cachedLanguage = null;
                    cachedSearchTerm = null;
                    
                    setTimeout(function() {
                        renderGallery();
                    }, 50);
                }
            }
            
            // Event listeners
            if (btnPage2) btnPage2.addEventListener('click', function() { showPage(secondPage); });
            if (btnOther) {
                btnOther.addEventListener('click', function() {
                    var message = appData.currentLanguage === 'en' ? 'This would navigate to the report page.' : 'ÿß€åŸÜ ÿ¥ŸÖÿß ÿ±ÿß ÿ®Ÿá ÿµŸÅÿ≠Ÿá ⁄Øÿ≤ÿßÿ±ÿ¥ ŸáÿØÿß€åÿ™ ŸÖ€å ⁄©ŸÜÿØ.';
                    alert(message);
                });
            }
            if (btnLostPersons) {
                btnLostPersons.addEventListener('click', function() {
                    currentPage = 1;
                    showPage(galleryPage);
                });
            }
            if (btnCategory2) {
                btnCategory2.addEventListener('click', function() {
                    var message = appData.currentLanguage === 'en' ? 'Category 2 selected' : 'ÿØÿ≥ÿ™Ÿá €≤ ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØ';
                    alert(message);
                });
            }
            if (btnCategory3) {
                btnCategory3.addEventListener('click', function() {
                    var message = appData.currentLanguage === 'en' ? 'Category 3 selected' : 'ÿØÿ≥ÿ™Ÿá €≥ ÿßŸÜÿ™ÿÆÿßÿ® ÿ¥ÿØ';
                    alert(message);
                });
            }
            if (backToFront) backToFront.addEventListener('click', function() { showPage(frontPage); });
            if (backToSecond) backToSecond.addEventListener('click', function() { showPage(secondPage); });
            
            // Navigation arrows
            if (prevPage) {
                prevPage.addEventListener('click', function() {
                    var items = getFilteredItems(searchBar ? searchBar.value : '');
                    var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
                    var totalPages = Math.ceil(items.length / itemsPerPage);
                    
                    if (totalPages > 0) {
                        if (currentPage > 1) {
                            currentPage--;
                        } else {
                            currentPage = totalPages;
                        }
                        renderGallery();
                    }
                });
            }
            
            if (nextPage) {
                nextPage.addEventListener('click', function() {
                    var items = getFilteredItems(searchBar ? searchBar.value : '');
                    var itemsPerPage = isMobile() ? itemsPerPageMobile : itemsPerPageDesktop;
                    var totalPages = Math.ceil(items.length / itemsPerPage);
                    
                    if (totalPages > 0) {
                        if (currentPage < totalPages) {
                            currentPage++;
                        } else {
                            currentPage = 1;
                        }
                        renderGallery();
                    }
                });
            }
            
            // Search
            if (searchBar) {
                searchBar.addEventListener('input', function() {
                    currentPage = 1;
                    clearSearchBtn.style.display = this.value.trim() !== '' ? 'block' : 'none';
                    cachedSearchTerm = null;
                    cachedItems = null;
                    
                    clearTimeout(this.searchTimeout);
                    var self = this;
                    this.searchTimeout = setTimeout(function() {
                        renderGallery();
                    }, 300);
                });
            }
            
            // Clear search
            if (clearSearchBtn) {
                clearSearchBtn.addEventListener('click', function() {
                    if (searchBar) {
                        searchBar.value = '';
                        clearSearchBtn.style.display = 'none';
                        currentPage = 1;
                        cachedSearchTerm = null;
                        cachedItems = null;
                        renderGallery();
                        searchBar.focus();
                    }
                });
            }
            
            // Window resize
            window.addEventListener('resize', function() {
                renderGallery();
            });
            
            // Initial render
            setTimeout(function() {
                renderGallery();
            }, 100);
        });
    </script>
</body>
</html>
